<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Valentine ğŸ’–</title>

  <style>
    :root{
      --bg1:#ff6cab;
      --bg2:#7366ff;
      --bg3:#23d5ab;
      --card: rgba(255,255,255,.92);
      --text:#222;
      --muted:#555;

      --yes:#22c55e;
      --no:#ff3b5c;

      --glow: 0 0 25px rgba(255,105,180,.55);
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      height:100vh;
      overflow:hidden;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
    }

    /* Animated background */
    .bg{
      position:fixed; inset:0;
      background: linear-gradient(120deg, var(--bg1), var(--bg2), var(--bg3), var(--bg1));
      background-size: 400% 400%;
      animation: gradient 12s ease infinite;
    }
    @keyframes gradient{
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }

    /* Sparkle layer */
    .sparkles{
      position:fixed; inset:0;
      pointer-events:none;
      background-image:
        radial-gradient(rgba(255,255,255,.55) 1px, transparent 1.5px),
        radial-gradient(rgba(255,255,255,.35) 1px, transparent 2px);
      background-size: 140px 140px, 90px 90px;
      background-position: 0 0, 40px 60px;
      mix-blend-mode: overlay;
      opacity:.35;
      animation: twinkle 8s ease-in-out infinite;
    }
    @keyframes twinkle{
      0%,100%{opacity:.25; transform:scale(1)}
      50%{opacity:.45; transform:scale(1.02)}
    }

    /* Floating hearts/flowers container */
    .floaters{
      position:fixed; inset:0;
      pointer-events:none;
      overflow:hidden;
    }
    .floater{
      position:absolute;
      font-size: clamp(18px, 3.5vw, 34px);
      opacity:.9;
      filter: drop-shadow(0 10px 15px rgba(0,0,0,.12));
      animation: floatUp linear forwards;
      will-change: transform, opacity;
    }
    @keyframes floatUp{
      0%   { transform: translateY(105vh) rotate(0deg); opacity:0; }
      10%  { opacity:1; }
      100% { transform: translateY(-20vh) rotate(360deg); opacity:0; }
    }

    /* Main layout */
    .wrap{
      position:relative;
      height:100vh;
      display:grid;
      place-items:center;
      padding:16px;
    }

    .card{
      width:min(740px, 94vw);
      background: var(--card);
      border-radius: 22px;
      padding: 26px 20px;
      box-shadow: 0 18px 60px rgba(0,0,0,.18);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255,255,255,.45);
      position:relative;
      overflow:hidden;
    }

    .badge{
      position:absolute;
      top:14px; right:14px;
      background: rgba(255,255,255,.75);
      border:1px solid rgba(255,105,180,.25);
      border-radius:999px;
      padding:8px 12px;
      font-weight:900;
      font-size:12px;
      color:#b91c1c;
      box-shadow: var(--glow);
    }

    h1{
      margin: 6px 0 6px;
      font-size: clamp(26px, 4vw, 44px);
      color:#d81b60;
      letter-spacing:.2px;
      text-align:center;
      text-shadow: 0 10px 30px rgba(216,27,96,.18);
    }
    .subtitle{
      margin:0 0 16px;
      text-align:center;
      color:var(--muted);
      font-weight:700;
    }

    .scene{ display:none; animation: pop .35s ease; }
    .scene.active{ display:block; }
    @keyframes pop{
      from{ transform: translateY(8px) scale(.985); opacity:.0; }
      to{ transform: translateY(0) scale(1); opacity:1; }
    }

    /* Question arena */
    .arena{
      position:relative;
      width:100%;
      height: 220px;
      margin-top: 12px;
      border-radius: 18px;
      background: linear-gradient(135deg, rgba(255,192,203,.35), rgba(173,216,230,.25));
      overflow:hidden;
      border: 1px dashed rgba(216,27,96,.25);
    }

    .btn{
      border:none;
      cursor:pointer;
      padding: 14px 26px;
      font-weight: 950;
      border-radius: 999px;
      font-size: 16px;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      box-shadow: 0 10px 22px rgba(0,0,0,.14);
      position:absolute;
      top: 26px;
      white-space: nowrap;
      transition: transform .12s ease, filter .2s ease, box-shadow .2s ease;
    }
    .btn:active{ transform: scale(.98); }
    .btn:hover{ filter: brightness(1.03); }

    #yesBtn{
      background: var(--yes);
      color:white;
      left:50%;
      transform: translateX(-125%);
    }
    #noBtn{
      background: var(--no);
      color:white;
      left:50%;
      transform: translateX(20%);
      touch-action:none;
    }

    .msg{
      margin-top: 16px;
      min-height: 30px;
      text-align:center;
      font-size: 18px;
      font-weight: 950;
      color:#6a1b9a;
    }
    .submsg{
      margin-top: 6px;
      min-height: 18px;
      text-align:center;
      font-size: 13px;
      color: #444;
      opacity: .86;
    }

    .type{
      margin: 10px auto 0;
      width: min(660px, 94%);
      background: rgba(255,255,255,.75);
      border: 1px solid rgba(0,0,0,.06);
      border-radius: 16px;
      padding: 14px 14px;
      box-shadow: 0 10px 30px rgba(0,0,0,.08);
      line-height:1.45;
      font-weight:750;
      color:#333;
      min-height:72px;
      white-space: pre-wrap;
    }

    .actions{
      display:flex;
      gap:12px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top: 14px;
    }
    .action{
      border:none;
      cursor:pointer;
      padding: 12px 18px;
      border-radius: 999px;
      font-weight: 950;
      background: rgba(255,255,255,.82);
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: 0 10px 25px rgba(0,0,0,.10);
    }
    .action.primary{
      background: linear-gradient(135deg, #ff4d6d, #ff8fab);
      color:white;
      border:none;
      box-shadow: var(--glow);
    }

    /* Proposal card */
    .proposal{
      margin: 14px auto 0;
      width: min(680px, 96%);
      border-radius: 20px;
      padding: 18px;
      background: linear-gradient(135deg, rgba(255,255,255,.92), rgba(255,255,255,.75));
      border:1px solid rgba(255,105,180,.20);
      box-shadow: 0 18px 50px rgba(0,0,0,.10);
      position:relative;
      overflow:hidden;
    }
    .proposal:before{
      content:"";
      position:absolute; inset:-40px;
      background: radial-gradient(circle at 30% 30%, rgba(255,105,180,.18), transparent 55%),
                  radial-gradient(circle at 80% 60%, rgba(0,200,255,.12), transparent 55%);
      transform: rotate(8deg);
    }
    .proposal > *{ position:relative; }

    .ring{
      font-size: 44px;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.18));
      animation: ring 1.4s ease-in-out infinite;
      text-align:center;
    }
    @keyframes ring{
      0%,100%{ transform: translateY(0) rotate(-2deg) }
      50%{ transform: translateY(-6px) rotate(2deg) }
    }
    .center{ text-align:center; }
    .mini{
      font-size: 13px;
      color:#444;
      opacity:.85;
      margin-top:8px;
      text-align:center;
    }

    /* Confetti canvas */
    canvas#fx{
      position:fixed;
      inset:0;
      pointer-events:none;
    }

    .hint{
      margin-top: 10px;
      text-align:center;
      font-size: 12px;
      opacity:.75;
    }
  </style>
</head>

<body>
  <div class="bg"></div>
  <div class="sparkles"></div>
  <div class="floaters" id="floaters"></div>
  <canvas id="fx"></canvas>

  <div class="wrap">
    <div class="card">
      <div class="badge">ğŸŒ¸ For Kutty ma ğŸ’–</div>

      <h1 id="title">Kutty ma, do you love me? ğŸ’–</h1>
      <p class="subtitle" id="subtitle">Choose wisely ğŸ˜ (No button isâ€¦ suspicious)</p>

      <!-- Scene 1 -->
      <div class="scene active" id="scene1">
        <div class="arena" id="arena">
          <button class="btn" id="yesBtn">Yes ğŸ˜</button>
          <button class="btn" id="noBtn">No ğŸ™ƒ</button>
        </div>

        <div class="msg" id="msg"></div>
        <div class="submsg" id="submsg"></div>

        <div class="hint">Try pressing â€œNoâ€ ğŸ˜ˆ (spoiler: it runs)</div>
      </div>

      <!-- Scene 2 -->
      <div class="scene" id="scene2">
        <div class="center" style="font-weight:950; font-size:18px; color:#111;">
          Okaaaay Kutty maâ€¦ I knew it ğŸ˜ŒğŸ’–
        </div>

        <div class="type" id="typeBox"></div>

        <div class="actions">
          <button class="action" id="next1">Next âœ¨</button>
          <button class="action primary" id="skipToProposal">Skip to proposal ğŸ’</button>
        </div>
      </div>

      <!-- Scene 3 -->
      <div class="scene" id="scene3">
        <div class="proposal">
          <div class="ring">ğŸ’</div>

          <h2 class="center" style="margin:8px 0 6px; color:#c2185b;">
            Will you be my Valentine? ğŸŒ¹
          </h2>

          <div class="center" style="font-weight:850; color:#333;">
            More dates, more laughs, more â€œusâ€ ğŸ’
          </div>

          <div class="center" style="margin-top:10px; font-weight:950; color:#6a1b9a;">
            Proposal: <span style="color:#111;">Snacks at Aladipattiyan</span> ğŸ˜‹ğŸŒ¸
          </div>

          <div class="actions" style="margin-top:14px;">
            <button class="action primary" id="finalYes">YESSS ğŸ’–</button>
            <button class="action" id="openMaps">Open Maps ğŸ—ºï¸</button>
            <button class="action" id="moreMagic">More magic ğŸ†</button>
          </div>

          <div class="mini" id="finalLine"></div>
        </div>

        <div class="hint">Screenshot this page and send me ğŸ˜ŒğŸ’˜</div>
      </div>

    </div>
  </div>

  <script>
    /***************
     * CONFIG (Already personalized)
     ***************/
    const CONFIG = {
      herName: "Kutty ma",
      proposalPlace: "Aladipattiyan",
      proposalLine: "Snacks at Aladipattiyan ğŸ˜‹ğŸŒ¸",
      storyLines: [
        "Kutty ma ğŸŒ¸â€¦ roses are red ğŸŒ¹, violets are blue ğŸ’œâ€¦",
        "This page was made only for you ğŸ˜Œâœ¨",
        "I may be a software guyâ€¦ but youâ€™re my favorite feature ğŸ’–",
        "Alsoâ€¦ the â€œNoâ€ button is in escape mode ğŸƒâ€â™‚ï¸ğŸ˜‚",
        "So letâ€™s make it official: Snacks at Aladipattiyan ğŸ˜‹ğŸŒ¸",
        "Now comeâ€¦ click YES and claim your Valentine title ğŸ˜ğŸ’˜"
      ],
      finalText: "Deal sealed âœ… Kutty ma is officially my Valentine ğŸ’˜"
    };

    /***************
     * Elements
     ***************/
    const arena  = document.getElementById("arena");
    const noBtn  = document.getElementById("noBtn");
    const yesBtn = document.getElementById("yesBtn");
    const msg    = document.getElementById("msg");
    const submsg = document.getElementById("submsg");

    const scene1 = document.getElementById("scene1");
    const scene2 = document.getElementById("scene2");
    const scene3 = document.getElementById("scene3");

    const typeBox = document.getElementById("typeBox");
    const next1 = document.getElementById("next1");
    const skipToProposal = document.getElementById("skipToProposal");

    const finalYes = document.getElementById("finalYes");
    const moreMagic = document.getElementById("moreMagic");
    const openMaps = document.getElementById("openMaps");
    const finalLine = document.getElementById("finalLine");

    const floaters = document.getElementById("floaters");
    const fx = document.getElementById("fx");
    const ctx = fx.getContext("2d");

    /***************
     * No-button spicy logic (cute + troll)
     ***************/
    const noTexts = [
      "No ğŸ™ƒ",
      "Are you sure? ğŸ˜",
      "Think again ğŸ¤­",
      "Nope ğŸ˜ˆ",
      "Last chance ğŸ¥º",
      "Error 404: No not found ğŸ˜‚",
      "Nice try ğŸ˜Œ",
      "Not allowed ğŸš«ğŸ˜„",
      "Wrong button ğŸ˜­",
      "Try harder ğŸƒâ€â™‚ï¸",
      "System locked ğŸ”’",
      "Okay fineâ€¦ you love me ğŸ˜ŒğŸ’–"
    ];

    const teaseLines = [
      "Heheâ€¦ that option is unavailable ğŸ˜Œ",
      "You really tried ah? ğŸ˜‚",
      "This button has legs ğŸƒâ€â™‚ï¸",
      "Green one is safer ğŸ˜",
      "Hmm suspicious ğŸ‘€",
      "Youâ€™re adorable ğŸ¥º",
      "Okay okayâ€¦ I saw that ğŸ˜†",
      "Stop chasing me ğŸ˜­",
      "Kutty maâ€¦ just click YES ğŸ˜‚",
      "This is destiny ğŸ’–",
      "Final warning: hearts incoming ğŸ’˜",
      "Confirmed âœ… you love me ğŸ˜ŒğŸ’–"
    ];

    let attempts = 0;
    let locked = false;

    const rand = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;

    function moveNoButton(){
      const r = arena.getBoundingClientRect();
      const w = noBtn.offsetWidth;
      const h = noBtn.offsetHeight;

      const pad = 10;
      const maxX = Math.max(pad, Math.floor(r.width  - w - pad));
      const maxY = Math.max(pad, Math.floor(r.height - h - pad));

      noBtn.style.left = rand(pad, maxX) + "px";
      noBtn.style.top  = rand(pad, maxY) + "px";
      noBtn.style.transform = "none";
    }

    function showScene(n){
      [scene1, scene2, scene3].forEach(s => s.classList.remove("active"));
      n.classList.add("active");
    }

    function treatAsYes(fromNo){
      if (locked) return;
      locked = true;

      // Cute + troll punchline
      msg.textContent = fromNo ? "I know you love me ğŸ˜ŒğŸ’–" : "Yayyy ğŸ˜­ğŸ’– I love you too!";
      submsg.textContent = fromNo ? "No option rejected by system âœ…" : "Best answer selected âœ…";

      confettiBurst(240);
      fireworks(2);
      spawnFloaters(24);

      setTimeout(() => {
        showScene(scene2);
        startTypewriter();
      }, 650);
    }

    function onNoAttempt(){
      if (locked) return;

      attempts++;
      const idx = (attempts - 1) % noTexts.length;
      noBtn.textContent = noTexts[idx];
      submsg.textContent = teaseLines[Math.min(teaseLines.length - 1, attempts - 1)];

      // Troll spice: YES slowly becomes irresistible ğŸ˜ˆ
      const grow = Math.min(1.22, 1 + attempts * 0.025);
      yesBtn.style.transform = `translateX(-125%) scale(${grow})`;

      moveNoButton();
      spawnFloaters(3);

      // Guarantee punchline after enough tries
      if (attempts >= 10) setTimeout(() => treatAsYes(true), 220);
    }

    ["mouseenter","mouseover","pointerenter"].forEach(evt =>
      noBtn.addEventListener(evt, onNoAttempt)
    );

    noBtn.addEventListener("touchstart", (e) => {
      e.preventDefault();
      onNoAttempt();
    }, { passive:false });

    // If click sneaks through, still treat as YES ğŸ˜
    noBtn.addEventListener("click", (e) => {
      e.preventDefault();
      treatAsYes(true);
    });

    yesBtn.addEventListener("click", () => treatAsYes(false));

    /***************
     * Scene 2: Typewriter story
     ***************/
    let typing = false;
    let lineIndex = 0;

    function startTypewriter(){
      if (typing) return;
      typing = true;
      typeBox.textContent = "";
      lineIndex = 0;
      typeNextLine();
    }

    function typeNextLine(){
      if (lineIndex >= CONFIG.storyLines.length) {
        typing = false;
        setTimeout(() => showScene(scene3), 450);
        return;
      }
      const line = CONFIG.storyLines[lineIndex];
      lineIndex++;

      typeLine(line, 22, () => {
        typeBox.textContent += "\n\n";
        setTimeout(typeNextLine, 380);
      });
    }

    function typeLine(text, speed, done){
      let i = 0;
      const timer = setInterval(() => {
        typeBox.textContent += text[i++];
        if (i >= text.length) {
          clearInterval(timer);
          done && done();
        }
      }, speed);
    }

    next1.addEventListener("click", () => {
      if (!typing) showScene(scene3);
      else {
        typing = false;
        typeBox.textContent = CONFIG.storyLines.join("\n\n");
        setTimeout(() => showScene(scene3), 200);
      }
    });

    skipToProposal.addEventListener("click", () => {
      typing = false;
      showScene(scene3);
      confettiBurst(160);
      spawnFloaters(16);
    });

    /***************
     * Scene 3: Final actions
     ***************/
    finalYes.addEventListener("click", async () => {
      confettiBurst(340);
      fireworks(3);
      spawnFloaters(34);

      finalLine.textContent = CONFIG.finalText;

      // Copy a cute WhatsApp-ready message
      const message =
`Kutty ma ğŸ’– YES à®šà¯Šà®²à¯à®²à®¿à®Ÿà¯à®Ÿà®¾ ğŸ˜­âœ¨
Proposal: Snacks at Aladipattiyan ğŸ˜‹ğŸŒ¸
Now when are we going? ğŸ«¶`;

      try{
        await navigator.clipboard.writeText(message);
        finalLine.textContent += " (Cute message copied âœ… Paste it in WhatsApp ğŸ˜„)";
      }catch(e){
        // Clipboard may be blocked on some browsers
        finalLine.textContent += " (Tip: Screenshot and send ğŸ˜„)";
      }
    });

    moreMagic.addEventListener("click", () => {
      confettiBurst(200);
      fireworks(2);
      spawnFloaters(20);
      finalLine.textContent = "Magic reloaded ğŸ†ğŸŒ¸ğŸ’˜";
    });

    openMaps.addEventListener("click", () => {
      const q = encodeURIComponent(CONFIG.proposalPlace);
      window.open(`https://www.google.com/maps/search/?api=1&query=${q}`, "_blank");
    });

    /***************
     * Floating hearts + flowers
     ***************/
    const EMOJIS = ["ğŸ’–","ğŸ’˜","ğŸ’","â¤ï¸","ğŸŒ¹","ğŸŒ¸","ğŸŒ·","âœ¨","ğŸ«¶","ğŸ¥°","ğŸ«","ğŸ€"];

    function spawnFloaters(count){
      for(let i=0;i<count;i++){
        const el = document.createElement("div");
        el.className = "floater";
        el.textContent = EMOJIS[rand(0, EMOJIS.length-1)];

        const left = rand(0, 100);
        const dur = rand(4500, 9000);
        const delay = rand(0, 800);

        el.style.left = left + "vw";
        el.style.animationDuration = dur + "ms";
        el.style.animationDelay = delay + "ms";
        el.style.opacity = (Math.random() * 0.35 + 0.55).toFixed(2);

        floaters.appendChild(el);
        setTimeout(() => el.remove(), dur + delay + 200);
      }
    }

    /***************
     * Confetti + Fireworks (canvas FX)
     ***************/
    let particles = [];
    function resizeFX(){
      fx.width = window.innerWidth * devicePixelRatio;
      fx.height = window.innerHeight * devicePixelRatio;
      ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
    }

    function confettiBurst(n=180){
      const colors = ["#ff4d6d","#ff8fab","#ffd166","#06d6a0","#4cc9f0","#a78bfa","#fb7185","#f472b6"];
      for(let i=0;i<n;i++){
        particles.push({
          x: window.innerWidth/2 + rand(-90,90),
          y: window.innerHeight/2 + rand(-50,50),
          vx: (Math.random()*8-4),
          vy: (Math.random()*-10-3),
          g: 0.22 + Math.random()*0.12,
          r: 2 + Math.random()*4,
          a: 1,
          rot: Math.random()*Math.PI,
          vr: (Math.random()*0.2-0.1),
          c: colors[rand(0, colors.length-1)],
          life: 190 + rand(0,90),
          type: "confetti"
        });
      }
    }

    function fireworks(bursts=2){
      const colors = ["#ffffff","#ffe066","#ff5d8f","#4cc9f0","#c77dff","#06d6a0"];
      for(let b=0;b<bursts;b++){
        const cx = rand(20, 80) * window.innerWidth/100;
        const cy = rand(15, 55) * window.innerHeight/100;
        const count = 95 + rand(0,55);
        for(let i=0;i<count;i++){
          const ang = Math.random()*Math.PI*2;
          const sp = 1.5 + Math.random()*4.8;
          particles.push({
            x: cx, y: cy,
            vx: Math.cos(ang)*sp,
            vy: Math.sin(ang)*sp,
            g: 0.06 + Math.random()*0.05,
            r: 1.2 + Math.random()*2.2,
            a: 1,
            rot: 0, vr: 0,
            c: colors[rand(0, colors.length-1)],
            life: 125 + rand(0,75),
            type: "spark"
          });
        }
      }
    }

    function tickFX(){
      ctx.clearRect(0,0,window.innerWidth,window.innerHeight);
      particles = particles.filter(p => p.life-- > 0 && p.a > 0.02);

      for(const p of particles){
        p.x += p.vx;
        p.y += p.vy;
        p.vy += p.g;
        p.rot += p.vr;
        p.a *= 0.992;

        ctx.save();
        ctx.globalAlpha = p.a;
        ctx.fillStyle = p.c;

        if(p.type === "confetti"){
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          ctx.fillRect(-p.r, -p.r/2, p.r*2.3, p.r);
        } else {
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
          ctx.fill();
        }
        ctx.restore();
      }
      requestAnimationFrame(tickFX);
    }

    /***************
     * Init
     ***************/
    window.addEventListener("load", () => {
      resizeFX();
      setTimeout(moveNoButton, 380);
      setInterval(() => spawnFloaters(1), 900);
      requestAnimationFrame(tickFX);
    });
    window.addEventListener("resize", resizeFX);
  </script>
</body>
</html>
